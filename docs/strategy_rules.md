# OpenStock 策略规则文档（交易员可读版）

> 本文档用于解释 OpenStock 中已实现策略的**交易逻辑、适用环境与风险**，帮助你理解> **什么时候该买、什么时候该卖、什么时候应该等待**。  
> 执行模型为 **信号在收盘生成，下一根 K 线开盘成交（next open）**。

---

## 一、整体交易理念（先读）

**我们不预测价格会到哪里，而是判断：**
- 当前更像 **趋势 / 震荡 / 突破**
- 在这种状态下，**哪一类策略更有统计优势**

所有策略都受以下两类“门禁”约束（只限制买入，不限制卖出）：
- **日线趋势过滤**
- **波动率过滤（ATR / 自适应 ATR 收缩）**

---

## 二、趋势类策略（顺势而为）

### 1. EMA 趋势跟随
**核心想法**：价格站上均线，说明趋势可能向上；跌破说明趋势可能结束。

- **买入**
  - 收盘价向上穿越 EMA
- **卖出**
  - 收盘价向下穿越 EMA
- **等待**
  - 价格与 EMA 反复缠绕
  - 日线趋势不支持

**适合**：单边趋势  
**不适合**：横盘震荡

---

### 2. SuperTrend
**核心想法**：用 ATR 动态判断趋势方向，并给出趋势止损线。

- **买入**
  - SuperTrend 由空翻多
- **卖出**
  - SuperTrend 由多翻空
- **等待**
  - SuperTrend 频繁翻转（震荡）

**适合**：趋势 + 有波动  
**风险**：震荡市来回打脸

---

### 3. 海龟交易（Donchian 通道）
**核心想法**：突破就是趋势的开始，跌破出场线就是趋势结束。

- **买入**
  - 收盘价突破入场通道（如 20）
- **卖出**
  - 收盘价跌破出场通道（如 10）
- **等待**
  - 通道长期不突破
  - 波动率明显收缩

**适合**：趋势启动阶段  
**风险**：假突破

---

### 4. Ichimoku（一目均衡表）
**核心想法**：云层判断趋势强弱，线判断进出。

- **买入**
  - 价格上穿云层，且转换线 > 基准线
- **卖出**
  - 价格下穿云层，且转换线 < 基准线
- **等待**
  - 价格在云层内反复

**适合**：中期趋势  
**风险**：震荡期信号失真

---

## 三、动量 / 波段类策略

### 5. MACD 金叉 / 死叉
- **买入**：MACD 金叉
- **卖出**：MACD 死叉
- **等待**：0 轴附近频繁交叉

**适合**：趋势中的回撤再启动  
**风险**：横盘噪声

---

### 6. RSI 动量（50 线）
- **买入**：RSI 上穿 50
- **卖出**：RSI 下穿 50
- **等待**：RSI 围绕 50 来回

---

### 7. KDJ（超买超卖）
- **买入**：低位金叉
- **卖出**：高位死叉
- **等待**：中间区域

**适合**：震荡行情  
**风险**：强趋势中逆势

---

## 四、均值回归 / 突破

### 8. 布林带均值回归
- **买入**：跌破下轨
- **卖出**：回到中轨
- **等待**：强趋势期开口放大

---

### 9. ATR Breakout
- **买入**：突破通道 + ATR 缓冲
- **卖出**：跌破通道或趋势反转
- **等待**：ATR 收缩

---

## 五、交易门禁（非常重要）

### 1️⃣ 日线趋势过滤
- **允许买入**：日线多头
- **禁止买入**：日线空头 / 不明
- **卖出**：永远允许

👉 这是提升胜率最重要的一层过滤。

---

### 2️⃣ 波动率过滤（ATR）
- **允许买入**：ATR% ≥ 阈值
- **禁止买入**：ATR% 过低（横盘绞杀期）

---

### 3️⃣ 自适应 ATR 收缩（分位数）
- 使用过去 120 日 ATR% 的分位数
- 若当前 ATR% 处于历史最低区间 → **等待**

👉 这是“只在市场开始活跃时出手”的机制。

---

## 六、什么时候买 / 卖 / 等（总结）

### 更适合买入
- 日线趋势向上
- 波动率非收缩
- 策略本身触发 BUY

### 更适合卖出
- 策略触发 SELL
- 不被任何门禁阻止

### 明确该等待
- 日线趋势不一致
- ATR 明显收缩
- 指标在关键值附近反复

---

## 七、重要提醒
- **胜率不是第一目标，期望值才是**
- **卖出优先级永远高于继续持有**
- **没有条件时，等待本身就是策略**

---

> 本文档是 OpenStock 策略系统的“交易解释层”，  
> 用于帮助你理解系统在**什么市场状态下做什么决策**。
